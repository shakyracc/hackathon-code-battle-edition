{"version":3,"file":"index.js","sources":["../src/assets/caret-down.jsx","../src/index.js"],"sourcesContent":["import React from 'react'\r\n\r\nexport const CaretDownIcon = (props) => {\r\n  const setStyle = () => {\r\n    let style\r\n    switch (props.point) {\r\n      case 'up':\r\n        style = {\r\n          position: 'absolute',\r\n          color: '#696969',\r\n          right: '20px',\r\n          transition: 'all 0.3s',\r\n          transform: 'rotate(180deg)',\r\n          height: '16px'\r\n        }\r\n        break\r\n\r\n      case 'down':\r\n        style = {\r\n          position: 'absolute',\r\n          right: '20px',\r\n          color: '#696969',\r\n          transition: 'all 0.3s',\r\n          height: '16px'\r\n        }\r\n        break\r\n\r\n      case 'up_white':\r\n        style = {\r\n          position: 'absolute',\r\n          left: '10px',\r\n          top: '-10px',\r\n          transform: 'rotate(180deg)',\r\n          color: '#fff',\r\n          height: '16px'\r\n        }\r\n        break\r\n    }\r\n    return style\r\n  }\r\n  return (\r\n    <svg\r\n      aria-hidden='true'\r\n      focusable='false'\r\n      data-prefix='fas'\r\n      data-icon='caret-down'\r\n      className='svg-inline--fa fa-caret-down fa-w-10'\r\n      role='img'\r\n      xmlns='http://www.w3.org/2000/svg'\r\n      viewBox='0 0 320 512'\r\n      height='18px'\r\n      color={props.color}\r\n      style={setStyle()}\r\n    >\r\n      <path\r\n        fill='currentColor'\r\n        d='M31.3 192h257.3c17.8 0 26.7 \r\n            21.5 14.1 34.1L174.1 354.8c-7.8 \r\n            7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 \r\n            213.5 13.5 192 31.3 192z'\r\n      ></path>\r\n    </svg>\r\n  )\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport styles from './styles.module.css'\r\nimport { CaretDownIcon } from './assets/caret-down'\r\n\r\nexport const ReactCountryDropdown = (props) => {\r\n  const [Countries, setCountries] = useState([])\r\n  const [CountriesCopy, setCountriesCopy] = useState([])\r\n  const [open, setOpen] = useState(false)\r\n  const [selectedCountry, setSelectedCountry] = useState(null)\r\n  const [defaultCountry, setDefaultCountry] = useState({\r\n    alpha2Code: '',\r\n    alpha3Code: ''\r\n  })\r\n\r\n  const dropdownRef = useRef(null)\r\n\r\n  useEffect(() => {\r\n    defaultCountrySetter(props.countryCode ? props.countryCode : 'US')\r\n    preFetchCountries().then((res) => {\r\n      setCountries(res)\r\n      setCountriesCopy(res)\r\n\r\n      preloadImages().then((arr) => {\r\n        arr.forEach((pic) => {\r\n          const img = new Image()\r\n          img.src = pic\r\n        })\r\n      })\r\n    })\r\n\r\n    document.addEventListener('mousedown', handleClickOutSide)\r\n  }, [])\r\n\r\n  const defaultCountrySetter = (d) => {\r\n    preFetchCountries().then((countries) => {\r\n      const defaultC = countries.filter(\r\n        (i) => i.alpha2Code.toLowerCase() === d.toLowerCase()\r\n      )\r\n      setDefaultCountry({\r\n        alpha2Code: defaultC[0].alpha2Code,\r\n        alpha3Code: defaultC[0].alpha3Code\r\n      })\r\n    })\r\n  }\r\n\r\n  const preFetchCountries = async () => {\r\n    const data = await fetch('https://restcountries.eu/rest/v2/all')\r\n    const result = await data.json()\r\n    return result\r\n  }\r\n\r\n  const handleClickOutSide = (e) => {\r\n    if (dropdownRef.current && !dropdownRef.current.contains(e.target)) {\r\n      setOpen(false)\r\n    }\r\n  }\r\n\r\n  const preloadImages = async () => {\r\n    const mapIconArr = []\r\n    Countries.map((i) => {\r\n      mapIconArr.push(`https://restcountries.eu/data/${i.alpha3Code}.svg`)\r\n    })\r\n    return mapIconArr\r\n  }\r\n\r\n  const toggleDropDown = () => {\r\n    /* reset all countries before closing */\r\n    if (!open) {\r\n      setCountries(CountriesCopy)\r\n    }\r\n    setOpen(!open)\r\n  }\r\n\r\n  const handleCountryClick = (i) => {\r\n    const result = {\r\n      name: i.name,\r\n      code: i.alpha2Code,\r\n      capital: i.capital,\r\n      region: i.region,\r\n      latlng: i.latlng\r\n    }\r\n    setDefaultCountry({\r\n      alpha2Code: i.alpha2Code,\r\n      alpha3Code: i.alpha3Code\r\n    })\r\n    /* Send the result as props on select*/\r\n    setSelectedCountry(result)\r\n\r\n    if (props.onSelect) {\r\n      props.onSelect(result)\r\n    }\r\n\r\n    /* Hide the dropdown menu on selecting a country */\r\n    toggleDropDown()\r\n  }\r\n\r\n  const handleSearchInput = (e) => {\r\n    const input = e.target.value.toLowerCase()\r\n    let filteredCountries = CountriesCopy.filter((i) =>\r\n      i.name.toLowerCase().includes(input.toLowerCase())\r\n    )\r\n    setCountries(filteredCountries)\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container} ref={dropdownRef}>\r\n      <div className={styles.dropdown} onClick={toggleDropDown}>\r\n        <img\r\n          className={styles.country_flag}\r\n          src={`https://restcountries.eu/data/${defaultCountry.alpha3Code.toLowerCase()}.svg`}\r\n        />\r\n        <span className={styles.selected_country}>\r\n          {defaultCountry.alpha2Code}\r\n        </span>\r\n        <CaretDownIcon point={open ? 'up' : 'down'} />\r\n      </div>\r\n\r\n      {open && (\r\n        <div className={styles.dropdown_items_wrapper}>\r\n          <CaretDownIcon point='up_white' />\r\n          <div className={styles.input_wrapper}>\r\n            <input\r\n              onChange={(e) => handleSearchInput(e)}\r\n              className={styles.country_search}\r\n              type='text'\r\n              placeholder='search coutries...'\r\n            />\r\n          </div>\r\n\r\n          <div className={styles.dropdown_items}>\r\n            {Countries.map((i, index) => {\r\n              return (\r\n                <div\r\n                  key={index}\r\n                  onClick={() => handleCountryClick(i)}\r\n                  className={styles.dropdown_item}\r\n                >\r\n                  <img className={styles.country_flag} src={i.flag} alt='' />\r\n                  <span className={styles.dropdown_item_title}> {i.name}</span>\r\n                </div>\r\n              )\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":["CaretDownIcon","props","setStyle","style","point","position","color","right","transition","transform","height","left","top","React","ReactCountryDropdown","useState","Countries","setCountries","CountriesCopy","setCountriesCopy","open","setOpen","selectedCountry","setSelectedCountry","alpha2Code","alpha3Code","defaultCountry","setDefaultCountry","dropdownRef","useRef","useEffect","defaultCountrySetter","countryCode","preFetchCountries","then","res","preloadImages","arr","forEach","pic","img","Image","src","document","addEventListener","handleClickOutSide","d","countries","defaultC","filter","i","toLowerCase","fetch","data","json","e","current","contains","target","mapIconArr","map","push","toggleDropDown","handleCountryClick","result","name","code","capital","region","latlng","onSelect","handleSearchInput","input","value","filteredCountries","includes","styles","container","dropdown","country_flag","selected_country","dropdown_items_wrapper","input_wrapper","country_search","dropdown_items","index","dropdown_item","flag","dropdown_item_title"],"mappings":";;;;;;;AAEO,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,CAACC,KAAD,EAAW;AACtC,MAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACrB,QAAIC,KAAJ;;AACA,YAAQF,KAAK,CAACG,KAAd;AACE,WAAK,IAAL;AACED,QAAAA,KAAK,GAAG;AACNE,UAAAA,QAAQ,EAAE,UADJ;AAENC,UAAAA,KAAK,EAAE,SAFD;AAGNC,UAAAA,KAAK,EAAE,MAHD;AAINC,UAAAA,UAAU,EAAE,UAJN;AAKNC,UAAAA,SAAS,EAAE,gBALL;AAMNC,UAAAA,MAAM,EAAE;AANF,SAAR;AAQA;;AAEF,WAAK,MAAL;AACEP,QAAAA,KAAK,GAAG;AACNE,UAAAA,QAAQ,EAAE,UADJ;AAENE,UAAAA,KAAK,EAAE,MAFD;AAGND,UAAAA,KAAK,EAAE,SAHD;AAINE,UAAAA,UAAU,EAAE,UAJN;AAKNE,UAAAA,MAAM,EAAE;AALF,SAAR;AAOA;;AAEF,WAAK,UAAL;AACEP,QAAAA,KAAK,GAAG;AACNE,UAAAA,QAAQ,EAAE,UADJ;AAENM,UAAAA,IAAI,EAAE,MAFA;AAGNC,UAAAA,GAAG,EAAE,OAHC;AAINH,UAAAA,SAAS,EAAE,gBAJL;AAKNH,UAAAA,KAAK,EAAE,MALD;AAMNI,UAAAA,MAAM,EAAE;AANF,SAAR;AAQA;AA/BJ;;AAiCA,WAAOP,KAAP;AACD,GApCD;;AAqCA,sBACEU;AACE,mBAAY,MADd;AAEE,IAAA,SAAS,EAAC,OAFZ;AAGE,mBAAY,KAHd;AAIE,iBAAU,YAJZ;AAKE,IAAA,SAAS,EAAC,sCALZ;AAME,IAAA,IAAI,EAAC,KANP;AAOE,IAAA,KAAK,EAAC,4BAPR;AAQE,IAAA,OAAO,EAAC,aARV;AASE,IAAA,MAAM,EAAC,MATT;AAUE,IAAA,KAAK,EAAEZ,KAAK,CAACK,KAVf;AAWE,IAAA,KAAK,EAAEJ,QAAQ;AAXjB,kBAaEW;AACE,IAAA,IAAI,EAAC,cADP;AAEE,IAAA,CAAC,EAAC;AAFJ,IAbF,CADF;AAuBD,CA7DM;;ICEMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACb,KAAD,EAAW;AAAA,kBACXc,cAAQ,CAAC,EAAD,CADG;AAAA,MACtCC,SADsC;AAAA,MAC3BC,YAD2B;;AAAA,mBAEHF,cAAQ,CAAC,EAAD,CAFL;AAAA,MAEtCG,aAFsC;AAAA,MAEvBC,gBAFuB;;AAAA,mBAGrBJ,cAAQ,CAAC,KAAD,CAHa;AAAA,MAGtCK,IAHsC;AAAA,MAGhCC,OAHgC;;AAAA,mBAICN,cAAQ,CAAC,IAAD,CAJT;AAAA,MAItCO,AAAiBC,kBAJqB;;AAAA,mBAKDR,cAAQ,CAAC;AACnDS,IAAAA,UAAU,EAAE,EADuC;AAEnDC,IAAAA,UAAU,EAAE;AAFuC,GAAD,CALP;AAAA,MAKtCC,cALsC;AAAA,MAKtBC,iBALsB;;AAU7C,MAAMC,WAAW,GAAGC,YAAM,CAAC,IAAD,CAA1B;AAEAC,EAAAA,eAAS,CAAC,YAAM;AACdC,IAAAA,oBAAoB,CAAC9B,KAAK,CAAC+B,WAAN,GAAoB/B,KAAK,CAAC+B,WAA1B,GAAwC,IAAzC,CAApB;AACAC,IAAAA,iBAAiB,GAAGC,IAApB,CAAyB,UAACC,GAAD,EAAS;AAChClB,MAAAA,YAAY,CAACkB,GAAD,CAAZ;AACAhB,MAAAA,gBAAgB,CAACgB,GAAD,CAAhB;AAEAC,MAAAA,aAAa,GAAGF,IAAhB,CAAqB,UAACG,GAAD,EAAS;AAC5BA,QAAAA,GAAG,CAACC,OAAJ,CAAY,UAACC,GAAD,EAAS;AACnB,cAAMC,GAAG,GAAG,IAAIC,KAAJ,EAAZ;AACAD,UAAAA,GAAG,CAACE,GAAJ,GAAUH,GAAV;AACD,SAHD;AAID,OALD;AAMD,KAVD;AAYAI,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCC,kBAAvC;AACD,GAfQ,EAeN,EAfM,CAAT;;AAiBA,MAAMd,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACe,CAAD,EAAO;AAClCb,IAAAA,iBAAiB,GAAGC,IAApB,CAAyB,UAACa,SAAD,EAAe;AACtC,UAAMC,QAAQ,GAAGD,SAAS,CAACE,MAAV,CACf,UAACC,CAAD;AAAA,eAAOA,CAAC,CAAC1B,UAAF,CAAa2B,WAAb,OAA+BL,CAAC,CAACK,WAAF,EAAtC;AAAA,OADe,CAAjB;AAGAxB,MAAAA,iBAAiB,CAAC;AAChBH,QAAAA,UAAU,EAAEwB,QAAQ,CAAC,CAAD,CAAR,CAAYxB,UADR;AAEhBC,QAAAA,UAAU,EAAEuB,QAAQ,CAAC,CAAD,CAAR,CAAYvB;AAFR,OAAD,CAAjB;AAID,KARD;AASD,GAVD;;AAYA,MAAMQ,iBAAiB,YAAjBA,iBAAiB;AAAA,QAAe;AAAA,6BACjBmB,KAAK,CAAC,sCAAD,CADY,iBAC9BC,IAD8B;AAAA,+BAEfA,IAAI,CAACC,IAAL,EAFe;AAAA;AAIrC,KAJsB;AAAA;AAAA;AAAA,GAAvB;;AAMA,MAAMT,kBAAkB,GAAG,SAArBA,kBAAqB,CAACU,CAAD,EAAO;AAChC,QAAI3B,WAAW,CAAC4B,OAAZ,IAAuB,CAAC5B,WAAW,CAAC4B,OAAZ,CAAoBC,QAApB,CAA6BF,CAAC,CAACG,MAA/B,CAA5B,EAAoE;AAClErC,MAAAA,OAAO,CAAC,KAAD,CAAP;AACD;AACF,GAJD;;AAMA,MAAMe,aAAa,YAAbA,aAAa;AAAA,QAAe;AAChC,UAAMuB,UAAU,GAAG,EAAnB;AACA3C,MAAAA,SAAS,CAAC4C,GAAV,CAAc,UAACV,CAAD,EAAO;AACnBS,QAAAA,UAAU,CAACE,IAAX,oCAAiDX,CAAC,CAACzB,UAAnD;AACD,OAFD;AAGA,6BAAOkC,UAAP;AACD,KANkB;AAAA;AAAA;AAAA,GAAnB;;AAQA,MAAMG,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAE3B,QAAI,CAAC1C,IAAL,EAAW;AACTH,MAAAA,YAAY,CAACC,aAAD,CAAZ;AACD;;AACDG,IAAAA,OAAO,CAAC,CAACD,IAAF,CAAP;AACD,GAND;;AAQA,MAAM2C,kBAAkB,GAAG,SAArBA,kBAAqB,CAACb,CAAD,EAAO;AAChC,QAAMc,MAAM,GAAG;AACbC,MAAAA,IAAI,EAAEf,CAAC,CAACe,IADK;AAEbC,MAAAA,IAAI,EAAEhB,CAAC,CAAC1B,UAFK;AAGb2C,MAAAA,OAAO,EAAEjB,CAAC,CAACiB,OAHE;AAIbC,MAAAA,MAAM,EAAElB,CAAC,CAACkB,MAJG;AAKbC,MAAAA,MAAM,EAAEnB,CAAC,CAACmB;AALG,KAAf;AAOA1C,IAAAA,iBAAiB,CAAC;AAChBH,MAAAA,UAAU,EAAE0B,CAAC,CAAC1B,UADE;AAEhBC,MAAAA,UAAU,EAAEyB,CAAC,CAACzB;AAFE,KAAD,CAAjB;AAKAF,IAAAA,kBAAkB,CAACyC,MAAD,CAAlB;;AAEA,QAAI/D,KAAK,CAACqE,QAAV,EAAoB;AAClBrE,MAAAA,KAAK,CAACqE,QAAN,CAAeN,MAAf;AACD;;AAGDF,IAAAA,cAAc;AACf,GArBD;;AAuBA,MAAMS,iBAAiB,GAAG,SAApBA,iBAAoB,CAAChB,CAAD,EAAO;AAC/B,QAAMiB,KAAK,GAAGjB,CAAC,CAACG,MAAF,CAASe,KAAT,CAAetB,WAAf,EAAd;AACA,QAAIuB,iBAAiB,GAAGxD,aAAa,CAAC+B,MAAd,CAAqB,UAACC,CAAD;AAAA,aAC3CA,CAAC,CAACe,IAAF,CAAOd,WAAP,GAAqBwB,QAArB,CAA8BH,KAAK,CAACrB,WAAN,EAA9B,CAD2C;AAAA,KAArB,CAAxB;AAGAlC,IAAAA,YAAY,CAACyD,iBAAD,CAAZ;AACD,GAND;;AAQA,sBACE7D;AAAK,IAAA,SAAS,EAAE+D,MAAM,CAACC,SAAvB;AAAkC,IAAA,GAAG,EAAEjD;AAAvC,kBACEf;AAAK,IAAA,SAAS,EAAE+D,MAAM,CAACE,QAAvB;AAAiC,IAAA,OAAO,EAAEhB;AAA1C,kBACEjD;AACE,IAAA,SAAS,EAAE+D,MAAM,CAACG,YADpB;AAEE,IAAA,GAAG,qCAAmCrD,cAAc,CAACD,UAAf,CAA0B0B,WAA1B,EAAnC;AAFL,IADF,eAKEtC;AAAM,IAAA,SAAS,EAAE+D,MAAM,CAACI;AAAxB,KACGtD,cAAc,CAACF,UADlB,CALF,eAQEX,6BAAC,aAAD;AAAe,IAAA,KAAK,EAAEO,IAAI,GAAG,IAAH,GAAU;AAApC,IARF,CADF,EAYGA,IAAI,iBACHP;AAAK,IAAA,SAAS,EAAE+D,MAAM,CAACK;AAAvB,kBACEpE,6BAAC,aAAD;AAAe,IAAA,KAAK,EAAC;AAArB,IADF,eAEEA;AAAK,IAAA,SAAS,EAAE+D,MAAM,CAACM;AAAvB,kBACErE;AACE,IAAA,QAAQ,EAAE,kBAAC0C,CAAD;AAAA,aAAOgB,iBAAiB,CAAChB,CAAD,CAAxB;AAAA,KADZ;AAEE,IAAA,SAAS,EAAEqB,MAAM,CAACO,cAFpB;AAGE,IAAA,IAAI,EAAC,MAHP;AAIE,IAAA,WAAW,EAAC;AAJd,IADF,CAFF,eAWEtE;AAAK,IAAA,SAAS,EAAE+D,MAAM,CAACQ;AAAvB,KACGpE,SAAS,CAAC4C,GAAV,CAAc,UAACV,CAAD,EAAImC,KAAJ,EAAc;AAC3B,wBACExE;AACE,MAAA,GAAG,EAAEwE,KADP;AAEE,MAAA,OAAO,EAAE;AAAA,eAAMtB,kBAAkB,CAACb,CAAD,CAAxB;AAAA,OAFX;AAGE,MAAA,SAAS,EAAE0B,MAAM,CAACU;AAHpB,oBAKEzE;AAAK,MAAA,SAAS,EAAE+D,MAAM,CAACG,YAAvB;AAAqC,MAAA,GAAG,EAAE7B,CAAC,CAACqC,IAA5C;AAAkD,MAAA,GAAG,EAAC;AAAtD,MALF,eAME1E;AAAM,MAAA,SAAS,EAAE+D,MAAM,CAACY;AAAxB,YAA+CtC,CAAC,CAACe,IAAjD,CANF,CADF;AAUD,GAXA,CADH,CAXF,CAbJ,CADF;AA2CD,CA/IM;;;;"}